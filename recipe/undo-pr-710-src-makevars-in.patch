diff --git a/src/Makevars.in b/src/Makevars.in
index a128332b..db58d138 100644
--- a/src/Makevars.in
+++ b/src/Makevars.in
@@ -7,26 +7,12 @@ PKG_CPPFLAGS = -I. -I../inst/include/ @CXX17_MACOS@ @TILEDB_INCLUDE@ @TILEDB_SIL
 ## We also need the TileDB library
 PKG_LIBS = @CXX17_MACOS@ @TILEDB_LIBS@ @TILEDB_RPATH@
 
-LIB_CON_DIR = ../inst/lib$(R_ARCH)
-LIB_CON = $(LIB_CON_DIR)/libconnection.so
-
-all: $(OBJECTS) $(LIB_CON) $(SHLIB)
+all: $(SHLIB)
         # if we are
         #  - on macOS aka Darwin which needs this
         #  - the library is present (implying non-system library use)
         # then let us call install_name_tool
-	@if [ `uname -s` = 'Darwin' ]; then \
+	@if [ `uname -s` = 'Darwin' ] && [ -f ../inst/tiledb/lib/libtiledb.dylib ] && [ -f tiledb.so ]; then \
 	    install_name_tool -change libz.1.dylib @rpath/libz.1.dylib ../inst/tiledb/lib/libtiledb.dylib; \
 	    install_name_tool -add_rpath @loader_path/../tiledb/lib tiledb.so; \
-	    install_name_tool -add_rpath @loader_path/../tiledb/lib $(LIB_CON); \
 	fi
-
-$(LIB_CON): connection/connection.o
-	@mkdir -p $(LIB_CON_DIR)
-	@$(SHLIB_LINK) $(SHLIB_LIBADD) $(LIBR) -o $@ $^
-	@rm $^
-
-clean:
-	rm -f $(SHLIB) $(OBJECTS) $(LIB_CON) connection/connection.o
-
-.PHONY: all clean
